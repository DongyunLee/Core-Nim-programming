#正则表达式 re & nre

##一、re模块

Nim是支持正则表达式的，不赞成使用这个模块，可以考虑使用nre模块或pegs模块来代替。

注意：这个模块的过程默认处理的是扩展正则表达式语法，它能使你自由的使用空格来增强正则表达式的可读性。然而，这意味着匹配空格 \s 或着一些相似的东西被使用。

这个模块是通过提供一个包装C库的 PRCE (Perl-Compatible Regular Expressions)来实现的。这意味着当你的程序使用这个模块时将依赖于PRCE库的许可，这应该不是一个问题。PRCE的许可证如下：

```
Licence of the PCRE library
PCRE is a library of functions to support regular expressions whose syntax and semantics are as close as possible to those of the Perl 5 language.
Written by Philip Hazel
Copyright (c) 1997-2005 University of Cambridge

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
Neither the name of the University of Cambridge nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
```


###正则表达式的语法和语义

由于支持正则表达式，这个模块是庞大的，读者可以通过网站：http://perldoc.perl.org/perlre.html  来了解整个关于Perl的正则表达式文档。

因为反斜杠 \ 无论在Nim中还是在正则表达式中都是一个元字符，所以强烈推荐使用Nim的原始字符串，以至于反斜杠由正则表达式引擎解释：


    r"\S" # 匹配任何不是不是空格的字符

一个正则表达式是一个模式，它是对字符串从左到右进行匹配。大多数字符串有自己的模式，并匹配相应的字符串的主题。一个简单的例子，模式：

    The quick brown fox


匹配一个目标字符串的部分是和它自身是相同的。正则表达式的力量来源于在模式中它能够包括选择项和重复次数。模式能够使用元字符编码，这些元字符不代表它们自身，而是由一些特殊的方式解析。

有两个不同的元字符集合：一些是被认为在模式中除了方括号内的任何地方，一些是在方括号内。在方括号外，元字符有：

<table>
   <tr>
      <td>meta character</td>
      <td>meaning</td>
   </tr>
   <tr>
      <td>\</td>
      <td>一般的转义字符使用</td>
   </tr>
   <tr>
      <td>^</td>
      <td>字符串开始出断言(or line, in multiline mode)</td>
   </tr>
   <tr>
      <td>$</td>
      <td>字符串结尾处断言 (or line, in multiline mode)</td>
   </tr>
   <tr>
      <td>.</td>
      <td>匹配任何字符，除了换行符 (默认情况下)</td>
   </tr>
   <tr>
      <td>[</td>
      <td>开始一个字符类别定义</td>
   </tr>
   <tr>
      <td>|</td>
      <td>开始选择分支</td>
   </tr>
   <tr>
      <td>(</td>
      <td>开始子模式</td>
   </tr>
   <tr>
      <td>)</td>
      <td>终止子模式</td>
   </tr>
   <tr>
      <td>?</td>
      <td>0或1个</td>
   </tr>
   <tr>
      <td>*</td>
      <td>0 或多个</td>
   </tr>
   <tr>
      <td>+</td>
      <td>1或多个</td>
   </tr>
   <tr>
      <td>{</td>
      <td>开始最少和最多量（ {2,5}表示最少2个，最多5个）</td>
   </tr>
</table>


模式的在方括号里的部分被称作是一个”character class”，在一个字符类别里的元字符有：

<table>
   <tr>
      <td>meta character</td>
      <td>meaning</td>
   </tr>
   <tr>
      <td>\</td>
      <td>一般的转义字符</td>
   </tr>
   <tr>
      <td>^</td>
      <td>反义的类别, 但是仅仅只有第一个字符</td>
   </tr>
   <tr>
      <td>-</td>
      <td>显示字符范围</td>
   </tr>
   <tr>
      <td>[</td>
      <td>POSIX 字符类别 (仅仅遵从POSIX 语法)</td>
   </tr>
   <tr>
      <td>]</td>
      <td>终止字符类别</td>
   </tr>
</table>

以下部分描述每个元字符的使用。



###反斜杠
    






