#6.3 子界类型
一个子界类型是一个序数类型（基类型）值的范围。要定义一个子界类型，必须要指定它的限定值：这个类型的最小值和最大值。

例如：

    type
      Subrange = range[0..5]
    
    var x: Subrange
    x = 3
    #x = 6      #error
    echo x 



**Subrange**是int的一个子界类型，其取值范围是0到5，分配任何其他的值给**Subrange**类型的变量都会产生编译错误或运行时错误，从基类型到一个它的子类型作为值分配给变量是允许的。一个子界类型与它的基类型同样的大小（在这个例子中是int）。

    type 
      subChar = range['a'..'z']
    
    var x:subChar = 'y'
    
    case x
    of 'a'..'h': echo 1
    of 'i'..'q': echo 2
    of 'r'..'z': echo 3

system模块定义一个重要的Natural类型：range[0..high(int)]（high返回最大值）。其他的语言对于自然数要求使用无符号整数。这是经常会出错的：你不想进行无符号运算仅仅是因为这个值不能是负数。Nim中的Natural类型有助于避免这种常见的编程错误。



翻译不到位：

Nim requires interval arithmetic for subrange types over a set of built-in operators that involve constants:x %% 3 is of type range[0..2]. The following built-in operators for integers are affected by this rule: -, +, *,min, max, succ, pred, mod, div, %%, and (bitwise and).

Bitwise and only produces a range if one of its operands is a constant x so that (x+1) is a number of two. (Bitwise and is then a %% operation.)

Nim要求对于子界类型的区间运算超过一组内置的包含常量的运算符：x %% 3 是类型range[0..2]。以下对整数的内置运算符是受这个规则影响的：- 、+ 、* 、min、max、succ、pred、mod、div、%%、and（按位与）。

按位与仅仅产生一个范围，如果它的一个操作对象是一个常量x 那么（x + 1)是一个数字2。（按位与然后是一个%%操作）。

这个意味着接下来的代码是允许的：

    var x: int
    
    case (x and 3) + 7        #任何数与3按位与可能得到的结果只能是[0..3]
    of 7: echo "A"
    of 8: echo "B"
    of 9: echo "C"
    of 10: echo "D"
    # note: no ``else`` required as (x and 3) + 7 has the type: range[7..10]

#
%%运算：（有错误？？？？）

    var x: int
    
    case (x %% 3)        #视参数为无符号数的模运算
    of 0: echo "A"
    of 1: echo "B"
    of 2: echo "C"
    #Error: not all cases are covered
#
mod运算:

    var x: int
    
    case (x mod 2)         #求余运算
    
    of -1: echo "-A"
    of 0: echo "A"
    of 1: echo "B"
    #of 2: echo "C"   #然而多加一个就会出错，Error: not all cases are covered？？？

#
为什么会出现-1,1情况呢？？？？，若没有编译错误：

    var x: int
    
    case ((x mod 2)*2)  
    of -2: echo "-A"
    of -1: echo "-A"
    of 0: echo "A"
    of 1: echo "-A"
    of 2: echo "B"

#
    var x: int
    
    case ((x and 3)*2)       #任何数与3按位与可能得到的结果只能是[0..3]
    of 0: echo "A"
    of 1: echo "B"
    of 2: echo "C"
    of 3: echo "D"
    of 5: echo "B"
    of 4: echo "C"
    of 6: echo "D"